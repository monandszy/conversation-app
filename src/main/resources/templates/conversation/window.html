<!DOCTYPE html>
<html
  lang="en" xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
  layout:decorate="~{layout.html}"
  xmlns:th="http://www.thymeleaf.org"
>
<head>
  <title>Conversation</title>
  <link hx-preserve="true" rel="stylesheet" href="/css/conversation_styles.css"/>
  <script hx-preserve="true" src="/js/conversation_scripts.js" defer></script>
</head>
<th:block layout:fragment="content">
  <head th:if="${isHxRequest == 'true'}" hx-head="merge">
    <title>Conversation</title>
    <link hx-preserve="true" rel="stylesheet" href="/css/conversation_styles.css"/>
    <script hx-preserve="true" src="/js/conversation_scripts.js" defer></script>
  </head>
  <div id="content" class="conversation-content">
    <div th:replace="~{conversation/sidebar :: fragment}"></div>
    <div id="conversation-wrapper">
      <th:block th:fragment="fragment">
        <div id="window-wrapper">
          <div id="window-content">
            <h1>Some Responses and requests content</h1>
            <div th:each="request : ${requestPage.content}" th:classappend="window-item">
              <p th:text="${request.text}" class="request"></p>
              <th:block th:each="response : ${request.responses}">
                <p th:text="${response.text}" class="response"></p>
              </th:block>
            </div>
          </div>
        </div>
      </th:block>
      <div th:replace="~{conversation/generate-form :: fragment}"></div>
    </div>
    <div>
      <script th:inline="javascript" defer>
        /*<![CDATA[*/
        globalConversationId = /*[[${conversationId}]]*/ 'null'
        document.getElementById('submit-button').innerText = 'Post_Generate';
        /*]]>*/
      </script>
    </div>
  </div>
</th:block>
<th:block th:fragment="singular-fragment">
  <div class="window-item">
    <p th:text="${requestReadDto.text}"></p>
    <th:block th:each="response : ${requestReadDto.responses}">
      <p th:text="${response.text}"></p>
    </th:block>
  </div>
</th:block>
</html>